<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.8.27">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Brian Repko">
<meta name="dcterms.date" content="2026-01-15">
<meta name="description" content="Part 2 - potential issues and challenges">

<title>Dataset-JSON ‚Äì Learning, Thinking, and Coding</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../../favicon.ico" rel="icon">
<script src="../../site_libs/quarto-html/quarto.js" type="module"></script>
<script src="../../site_libs/quarto-html/tabsets/tabsets.js" type="module"></script>
<script src="../../site_libs/quarto-html/axe/axe-check.js" type="module"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-ed96de9b727972fe78a7b5d16c58bf87.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap-81161df70946103be4ff68a34233701c.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN" && texText && texText.data) {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-fixed fullcontent quarto-light">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top quarto-banner">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Learning, Thinking, and Coding</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.learnthinkcode.com/"> <i class="bi bi-house-fill" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/brianrepko/blog/"> <i class="bi bi-github" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://hachyderm.io/@brianrepko"> <i class="bi bi-mastodon" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="https://www.linkedin.com/in/brianrepko/"> <i class="bi bi-linkedin" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
  <li class="nav-item compact">
    <a class="nav-link" href="../../index.xml"> <i class="bi bi-rss" role="img">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<header id="title-block-header" class="quarto-title-block default page-columns page-full">
  <div class="quarto-title-banner page-columns page-full">
    <div class="quarto-title column-body">
      <h1 class="title">Dataset-JSON</h1>
                  <div>
        <div class="description">
          Part 2 - potential issues and challenges
        </div>
      </div>
                          <div class="quarto-categories">
                <div class="quarto-category">pharmaverse</div>
                <div class="quarto-category">data</div>
              </div>
                  </div>
  </div>
    
  
  <div class="quarto-title-meta">

      <div>
      <div class="quarto-title-meta-heading">Author</div>
      <div class="quarto-title-meta-contents">
               <p>Brian Repko </p>
            </div>
    </div>
      
      <div>
      <div class="quarto-title-meta-heading">Published</div>
      <div class="quarto-title-meta-contents">
        <p class="date">January 15, 2026</p>
      </div>
    </div>
    
      
    </div>
    
  
  </header><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    
<!-- main -->
<main class="content quarto-banner-title-block" id="quarto-document-content">





<div class="callout callout-style-default callout-tip callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-title-container flex-fill">
<span class="screen-reader-only">Tip</span>Series
</div>
</div>
<div class="callout-body-container callout-body">
<p>This is part 2 of a series on dataset-json, you can find part 1 <a href="https://brianrepko.github.io/blog/posts/2025-12-31-datasetjson-part1/" target="_blank">here</a> for an overview of dataset-json.</p>
</div>
</div>
<section id="intention" class="level2">
<h2 class="anchored" data-anchor-id="intention">Intention</h2>
<p>Similar to how art can be additive (painting) or subtractive (sculpting), computational work can be positive (‚Äúhow do I get to a result‚Äù) or negative (‚Äúwhat could go wrong here‚Äù). Most of us develop in both ways of working - and we tend to have a default / stronger side. Mine is the negative - which is why I think I‚Äôve always focused on risk with systems development. I mention this because this blog post falls 100% in the - what could go wrong here category. This is me going through a specification and calling out anything that feels risky. I hope this spawns conversations and github issues and wiki updates and PRs. This is me also calling out where I‚Äôd love to contribute - not just complain. I‚Äôll also add that I am not a SAS programmer so I may definitely get some items wrong here.</p>
<p>From part 1, here is the <a href="https://cdisc-org.github.io/DataExchange-DatasetJson/doc/dataset-json1-1.html">link to the html version of the spec</a> - so let‚Äôs dive in‚Ä¶</p>
</section>
<section id="background---xml-and-json-technologies" class="level2">
<h2 class="anchored" data-anchor-id="background---xml-and-json-technologies">Background - XML and JSON technologies</h2>
<p>Within the XML set of specifications and technologies - we have the following:</p>
<ul>
<li><a href="https://www.w3.org/TR/xml/">XML</a> - data format</li>
<li><a href="https://www.w3.org/TR/xmlschema11-2/">XML Schema</a> - structure and data types with simple validation and constraints</li>
<li><a href="https://schematron.com">Schematron</a> - rule-based content validation, complex relationships, and business logic</li>
</ul>
<p>For JSON we have a similar set of specifications and technologies:</p>
<ul>
<li><a href="https://www.json.org/json-en.html">JSON</a> - data format</li>
<li><a href="https://json-schema.org">JSON schema</a> - structure and data types with simple validation and constraints</li>
<li><a href="https://amer-ali.github.io/jsontron/">jsontron</a> - a port of Schematron for JSON (not widely used)</li>
</ul>
<p>The reason that I want to bring this up is that some of the issues below relate to ‚Äúwhere‚Äù something belongs and potentially having it in the wrong space.</p>
<p>Also, I think that the use of jsontron would be interesting in this space potentially.</p>
<section id="data-types" class="level3">
<h3 class="anchored" data-anchor-id="data-types">Data Types</h3>
<p>JSON, JSON schema, and dataset-json work with a set of data types. Note that JSON / JSON schema are working on object / property definition and dataset-json is column definition. Here is a table that goes over what is available for each specification in relation to each other:</p>
<table class="caption-top table">
<caption>Data Types</caption>
<colgroup>
<col style="width: 33%">
<col style="width: 33%">
<col style="width: 33%">
</colgroup>
<thead>
<tr class="header">
<th>JSON</th>
<th>JSON schema</th>
<th>dataset-json</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>boolean</td>
<td>boolean</td>
<td>boolean</td>
</tr>
<tr class="even">
<td>string</td>
<td>string</td>
<td>string</td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td>decimal</td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td>datetime</td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td>date</td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td>time</td>
</tr>
<tr class="odd">
<td></td>
<td></td>
<td>URI</td>
</tr>
<tr class="even">
<td>number</td>
<td>integer</td>
<td>integer</td>
</tr>
<tr class="odd">
<td></td>
<td>number</td>
<td>float</td>
</tr>
<tr class="even">
<td></td>
<td></td>
<td>double</td>
</tr>
<tr class="odd">
<td>array</td>
<td>array</td>
<td>-</td>
</tr>
<tr class="even">
<td>object</td>
<td>object</td>
<td>-</td>
</tr>
</tbody>
</table>
<p>Note that dataset-json has both a JSON schema and LinkML version of the schema. The JSON schema is based on the 2019-09 standard (vs the latest, which is 2020-12).</p>
<p>Also note that JSON schema has various constraints added to the type. In general, objects can also specify, via a <code>required</code> array, which properties are required. There is also the capability to do ‚Äúrequired-if‚Äù logic (which could also be a jsontron rule).</p>
<p>For string-based data types, we have <code>minLength</code>, <code>maxLength</code>, <code>pattern</code>, and <code>format</code>. JSON schema has known formats for <code>date-time</code>, <code>date</code>, <code>time</code>, and <code>uri</code> (and <code>iri</code>) - but <strong>dataset-json does not use these</strong>. It makes use of <code>pattern</code> for validation of those string-based types. This may be the case that <code>pattern</code> is actually used when validating and <code>format</code> may not be. That is probably dependent on the validator software. You can find the full list of supported JSON schema formats <a href="https://json-schema.org/understanding-json-schema/reference/type#built-in-formats">here</a>.</p>
<p>For numeric data, JSON schema separates integers (‚Ñ§) from decimal (ùîª) data. Note that decimals (ùîª) is a subset of the rationals (‚Ñö) - given by <span class="math inline">\(a/10^n\)</span> (where <span class="math inline">\(a\)</span> and <span class="math inline">\(n\)</span> are in ‚Ñ§). Thus <span class="math inline">\(1/3\)</span> is in ‚Ñö but not in ùîª (it repeats forever) and thus for some values we have to deal with both precision and rounding.</p>
<p>The dataset-json data types of <code>float</code> and <code>double</code> are intended to represent in-memory IEEE 754 single- and double-precision constructs. It is basically saying what data type to use in the environment (SAS, R, python, etc.) that will import this data - or at least the <em>capability</em> of said environment (eg. R only has doubles - not floats). There are the well-known issues of converting values in ùîª to a base 2 binary format.</p>
<p>Interestingly, there is no JSON schema format for dataset-json‚Äôs ‚Äúdecimal‚Äù - again that is using a data type to specify the in-memory representation for this column (aka decimal stored as a string).</p>
<p>In terms of character encoding for the file, later versions of JSON require UTF-8 encoding. The dataset-json User‚Äôs Guide refers to optional usage of UTF-16 or UTF-32 but this is not allowed in <a href="https://datatracker.ietf.org/doc/html/rfc8259">RFC8259</a>.</p>
<p>Also, a general issue with JSON is that the Unicode escape - <code>\uXXXX</code> - only supports Unicode‚Äôs Basic Multilingual Plane (BMP) and not full Unicode. One needs to either embed the codepoints directly (UTF-8 supports all Unicode) or escape as surrogate pair.</p>
<p>And then for moving from US-ASCII to Unicode‚Ä¶</p>
<p><img src="unicode-meme.jpg" class="img-fluid"></p>
<p>Once you have Unicode strings, there are many issues that one needs to worry about. I‚Äôm not going to go over all of these but here is a short list (many from <a href="https://tonsky.me/blog/unicode/">here</a>).</p>
<ul>
<li>Unicode normalization</li>
<li>length of a Unicode string (with grapheme clusters - particularly for Asian languages)</li>
<li>casing (upper/lower)</li>
<li>sorting / collation</li>
<li>right-to-left vs left-to-right languages</li>
<li>regex class membership (eg. <code>:alpha:</code>)</li>
</ul>
<p>I get that we are looking to move beyond the current XPT limitations at a later stage. At some point, I‚Äôm sure CDISC will have a number of workshops on ‚ÄúInternationalizing Clinical Trial Data‚Äù.</p>
</section>
</section>
<section id="our-problem-domain" class="level2">
<h2 class="anchored" data-anchor-id="our-problem-domain">Our Problem Domain</h2>
<p>I think it‚Äôs useful to also step back and share what the actual problem we are trying to solve here is. We will have, as part of the data and coding related to a clinical trial, ‚Äúdata frames‚Äù. For SAS, these are datasets, for R, these are data.frame-s and for python, these are pandas.DataFrame-s (or polars?) and in SQL, these are tables.</p>
<p>We have two main contexts - same-language serialization (export / import) and different-language serialization. In both these contexts, the ultimate question is - is the original in-memory data frame the same as the resulting in-memory data frame. When we are in the same-language context (SAS ‚Üí JSON ‚Üí SAS), ‚Äúsameness‚Äù of in-memory data frames can consider deeper properties of the internal data structure. When we are in the different-language context (R ‚Üí JSON ‚Üí SAS), ‚Äúsameness‚Äù of the in-memory data frames does not have access to those deeper properties - internal data types used for the columns are in different programming languages and data frame classes have different properties - SAS datasets can have a ‚Äúkey‚Äù (hash), multiple indices, display formats etc. R data.frames have row.names which SAS does not (similar to key but SAS keys don‚Äôt <em>have to</em> be unique).</p>
<p>The reason that I bring this up is that some parts of the dataset-json specification are for the <strong>SAS-specific same-language context</strong>.</p>
<p>I actually think that we might not care about a different-language context as clinical trial validation from the regulatory authority will be same-language. However, as clinical trial code becomes more polyglot - some SAS, some R, some python - then we might need to consider different-language contexts.</p>
</section>
<section id="oids-and-the-model-beyond-a-data-frame" class="level2">
<h2 class="anchored" data-anchor-id="oids-and-the-model-beyond-a-data-frame">OIDs and the model beyond a ‚Äúdata frame‚Äù</h2>
<p>As I was initially reviewing the dataset-json specification, one quick item that stuck out was that there was no way to say if a column allowed for missing values or not - that is - is a column required.</p>
<p>This led me into the ODM model and the various OID columns in the specification.</p>
<p>The dataset-json specification is not <em>ONLY</em> ‚Äúserialized data frames‚Äù - it is ‚Äúserialized data frames within a catalog‚Äù. That catalog is the <code>define.xml</code> that is sent along with the <code>.json</code> or <code>.ndjson</code> or <code>.dsjc</code> files. This gets a bit too deep and needs it‚Äôs own blog post but in short - you can think of the following connections.</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>ODM term</th>
<th>concept</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Study</td>
<td>Study</td>
</tr>
<tr class="even">
<td>ItemGroup</td>
<td>Domain or data frame metadata</td>
</tr>
<tr class="odd">
<td>Item</td>
<td>Variable or column metadata</td>
</tr>
<tr class="even">
<td>ItemGroupData</td>
<td>actual row of values</td>
</tr>
<tr class="odd">
<td>ItemData</td>
<td>actual cell value</td>
</tr>
<tr class="even">
<td>File</td>
<td>actual filename</td>
</tr>
</tbody>
</table>
<p>So an ItemGroupOID might have a value of <code>IG.DM</code> for the SDTM <code>DM</code> domain (Demographics). And there will be a ItemOID of <code>IT.STUDYID</code> or <code>IT.USUBJID</code> in that item group. Those are columns that used in multiple domains. The DM domain might also have an ItemOID of <code>IT.DM.ETHNIC</code> which is specific to the DM domain.</p>
<p>The reason that I bring this up is that some properties of the column definition are in <code>define.xml</code> as ItemRef(s) and some properties as ItemDef(s). <code>Mandatory</code> is part of the ItemRef. The dataset-json specification is only ItemDef data.</p>
<p>The specification is written so that the OID columns are optional, but to fully validate data, there are some column attributes that are only in <code>define.xml</code>.</p>
</section>
<section id="column-attribute-issues" class="level2">
<h2 class="anchored" data-anchor-id="column-attribute-issues">Column Attribute Issues</h2>
<p>Looking at the column attributes, what is required are the basics</p>
<ul>
<li><code>itemOID</code> - the unique key of this column</li>
<li><code>name</code> - the column name</li>
<li><code>label</code> - the column label</li>
<li><code>dataType</code> - the column type</li>
</ul>
<p>These all make sense - with dataType being an enum (see list above). Technically, there are many other dataTypes in the ODM XML model but in practice the main types are there.</p>
<section id="targetdatatype" class="level3">
<h3 class="anchored" data-anchor-id="targetdatatype">targetDataType</h3>
<p>As for <code>targetDataType</code>, this came about as datetime, date, and time values in SAS are <strong>either</strong> strings or numeric values (with the 0-date being Jan 1, 19<strong>60</strong> and the 0-time being midnight). But the data in the JSON file is always a string, so this column attribute is telling the serialization software what the resulting in-memory data type should be. But R and python have various classes for datetime, date, and time values. Some of those do use a number representation for timestamps under the covers. But again, it seems we are using the specification to specify details of the internal data structure.</p>
<p>This column attribute is also used for the <code>decimal</code> data type in a superfluous manner. It has to be added for string-representations of decimal values.</p>
<p>If we really want to specify the language-specific data structure properties, then it might make more sense to have those under the top-level <code>sourceSystem</code> perhaps - or under language-specific top-level attributes.</p>
</section>
<section id="length" class="level3">
<h3 class="anchored" data-anchor-id="length">length</h3>
<p>Next we have <code>length</code>, which as mentioned above is problematic for Unicode strings based on normalization and grapheme clustering. The sense I get is that the value here is meant to be a <strong>capability</strong> (you have to handle strings at-least this long).</p>
</section>
<section id="displayformat" class="level3">
<h3 class="anchored" data-anchor-id="displayformat">displayFormat</h3>
<p>This is clearly a SAS only attribute to used to make sure original and resulting datasets are the ‚Äúsame‚Äù.</p>
</section>
<section id="keysequence" class="level3">
<h3 class="anchored" data-anchor-id="keysequence">keySequence</h3>
<p>The keySequence attribute can be used to create the SAS dataset key (hash) - so this is clearly for internal data structure. Technically in SAS, this can doesn‚Äôt have to be unique (eg. <code>MULTIDATA: 'Y'</code>). For R, <code>row.names</code> could be created from this but <code>row.names</code> must be unique.</p>
<p>I‚Äôm not familiar enough with SAS to know if a component of a key implies it is required.</p>
<p>I‚Äôd also add that SAS datasets can have multiple indices, so I‚Äôm not sure why, if we are specifying internal data structure we include the key and not the indices. My guess is that these are not part of ODM XML schema to which we are creating this specification from. It could be the ODM XML schema is a bit SAS-specific as well.</p>
</section>
<section id="what-is-not-here" class="level3">
<h3 class="anchored" data-anchor-id="what-is-not-here">What is not here</h3>
<p>As mentioned above, if I needed to specify more rules to validate a dataset, then I would need to know if the column values can be missing or not (required) or conditionally required.</p>
<p>In addition, all those JSON schema properties start to apply - range on numeric values? enumerations? code-lists? string regex?</p>
</section>
</section>
<section id="top-level-metadata-attribute-issues" class="level2">
<h2 class="anchored" data-anchor-id="top-level-metadata-attribute-issues">Top-level Metadata Attribute Issues</h2>
<p>Again, the required attributes for the dataset-json top-level metadata all make sense.</p>
<ul>
<li>name - the name of the dataset</li>
<li>label - the label for the dataset</li>
<li>columns - the column definitions (see above)</li>
<li>records - the number of rows</li>
<li>datasetJSONCreationDateTime - timestamp for dataset-json file creation</li>
<li>datasetJSONVersion - the version (1.1 with optional third component)</li>
<li>itemGroupOID - the OID for this dataset</li>
</ul>
<p>In general, it is a pet peeve of mine to allow datetime and time values without timezones but that is allowed here (as well as dealing with incomplete data) - all part of ISO 8601.</p>
<p>And for style, I‚Äôd have used <code>rowCount</code> for <code>records</code> but given the context it makes total sense.</p>
<section id="oids" class="level3">
<h3 class="anchored" data-anchor-id="oids">OIDs</h3>
<p>The <code>fileOID</code>, <code>studyOID</code>, <code>metaDataVersionOID</code> and <code>metaDataRef</code> attributes are all related to connecting this data to the <code>define.xml</code> catalog - technically optional but I‚Äôm not sure how to properly validate a dataset without it.</p>
<p>In the end, <code>itemGroupOID</code> and <code>itemOID</code> are the only required OID values.</p>
</section>
<section id="dblastmodifieddatetime" class="level3">
<h3 class="anchored" data-anchor-id="dblastmodifieddatetime">dbLastModifiedDateTime</h3>
<p>The <code>dbLastModifiedDateTime</code> attribute is the last modified timestamp for the source of this JSON data.</p>
<p>There is a jsontron type rule for this being earlier than the creation timestamp required attribute.</p>
<p>Again as a style thing, I would have used ‚Äúsource‚Äù vs ‚Äúdb‚Äù - and perhaps made this part of the <code>sourceSystem</code> object. And it should have a timezone.</p>
<p>The mention of ‚Äúdb‚Äù however, makes me wonder about creating a DuckDB extension to read and write dataset-json files (each file as a table and then include the catalog data as well).</p>
</section>
<section id="source-information" class="level3">
<h3 class="anchored" data-anchor-id="source-information">Source information</h3>
<p>The <code>originator</code>, <code>sourceSystem</code> (with <code>name</code> and <code>version</code>) are to be used to share the organization and ‚Äúsystem‚Äù that generated this dataset-json file. It‚Äôs not clear to me if <code>sourceSystem</code> should be a package name, programming language, internal SCE name? I think more clarity on how this could be used is warranted. This could also be a place there SAS, R, python-specific data could be recorded.</p>
</section>
</section>
<section id="extendability-issues" class="level2">
<h2 class="anchored" data-anchor-id="extendability-issues">Extendability Issues</h2>
<p>There is discussion of extendability to dataset-json - this uses a new <code>sourceSystem.systemExtensions</code> attribute but also seems to imply a custom JSON schema file. I do think JSON schema has built in schema extension capabilities and perhaps those could be looked at in the examples. Perhaps this is a place to extend the data to internal data structure details.</p>
</section>
<section id="next-article" class="level2">
<h2 class="anchored" data-anchor-id="next-article">Next article</h2>
<p>I hope this is useful and I am more than open to creating github issues / updates to the User Guide etc. Happy to receive feedback - my contact info is at <a href="https://www.learnthinkcode.com">my website</a>.</p>
<p>In part 3, I‚Äôll review the API and potential issues there.</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
  window.document.addEventListener("DOMContentLoaded", function (event) {
    const icon = "Óßã";
    const anchorJS = new window.AnchorJS();
    anchorJS.options = {
      placement: 'right',
      icon: icon
    };
    anchorJS.add('.anchored');
    const isCodeAnnotation = (el) => {
      for (const clz of el.classList) {
        if (clz.startsWith('code-annotation-')) {                     
          return true;
        }
      }
      return false;
    }
    const onCopySuccess = function(e) {
      // button target
      const button = e.trigger;
      // don't keep focus
      button.blur();
      // flash "checked"
      button.classList.add('code-copy-button-checked');
      var currentTitle = button.getAttribute("title");
      button.setAttribute("title", "Copied!");
      let tooltip;
      if (window.bootstrap) {
        button.setAttribute("data-bs-toggle", "tooltip");
        button.setAttribute("data-bs-placement", "left");
        button.setAttribute("data-bs-title", "Copied!");
        tooltip = new bootstrap.Tooltip(button, 
          { trigger: "manual", 
            customClass: "code-copy-button-tooltip",
            offset: [0, -8]});
        tooltip.show();    
      }
      setTimeout(function() {
        if (tooltip) {
          tooltip.hide();
          button.removeAttribute("data-bs-title");
          button.removeAttribute("data-bs-toggle");
          button.removeAttribute("data-bs-placement");
        }
        button.setAttribute("title", currentTitle);
        button.classList.remove('code-copy-button-checked');
      }, 1000);
      // clear code selection
      e.clearSelection();
    }
    const getTextToCopy = function(trigger) {
      const outerScaffold = trigger.parentElement.cloneNode(true);
      const codeEl = outerScaffold.querySelector('code');
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
    const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
      text: getTextToCopy
    });
    clipboard.on('success', onCopySuccess);
    if (window.document.getElementById('quarto-embedded-source-code-modal')) {
      const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
        text: getTextToCopy,
        container: window.document.getElementById('quarto-embedded-source-code-modal')
      });
      clipboardModal.on('success', onCopySuccess);
    }
      var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
      var mailtoRegex = new RegExp(/^mailto:/);
        var filterRegex = new RegExp("https:\/\/brianrepko\.github\.io\/blog");
      var isInternal = (href) => {
          return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
      }
      // Inspect non-navigation links and adorn them if external
     var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
      for (var i=0; i<links.length; i++) {
        const link = links[i];
        if (!isInternal(link.href)) {
          // undo the damage that might have been done by quarto-nav.js in the case of
          // links that we want to consider external
          if (link.dataset.originalHref !== undefined) {
            link.href = link.dataset.originalHref;
          }
            // target, if specified
            link.setAttribute("target", "_blank");
            if (link.getAttribute("rel") === null) {
              link.setAttribute("rel", "noopener");
            }
            // default icon
            link.classList.add("external");
        }
      }
    function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
      const config = {
        allowHTML: true,
        maxWidth: 500,
        delay: 100,
        arrow: false,
        appendTo: function(el) {
            return el.parentElement;
        },
        interactive: true,
        interactiveBorder: 10,
        theme: 'quarto',
        placement: 'bottom-start',
      };
      if (contentFn) {
        config.content = contentFn;
      }
      if (onTriggerFn) {
        config.onTrigger = onTriggerFn;
      }
      if (onUntriggerFn) {
        config.onUntrigger = onUntriggerFn;
      }
      window.tippy(el, config); 
    }
    const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
    for (var i=0; i<noterefs.length; i++) {
      const ref = noterefs[i];
      tippyHover(ref, function() {
        // use id or data attribute instead here
        let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
        try { href = new URL(href).hash; } catch {}
        const id = href.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note) {
          return note.innerHTML;
        } else {
          return "";
        }
      });
    }
    const xrefs = window.document.querySelectorAll('a.quarto-xref');
    const processXRef = (id, note) => {
      // Strip column container classes
      const stripColumnClz = (el) => {
        el.classList.remove("page-full", "page-columns");
        if (el.children) {
          for (const child of el.children) {
            stripColumnClz(child);
          }
        }
      }
      stripColumnClz(note)
      if (id === null || id.startsWith('sec-')) {
        // Special case sections, only their first couple elements
        const container = document.createElement("div");
        if (note.children && note.children.length > 2) {
          container.appendChild(note.children[0].cloneNode(true));
          for (let i = 1; i < note.children.length; i++) {
            const child = note.children[i];
            if (child.tagName === "P" && child.innerText === "") {
              continue;
            } else {
              container.appendChild(child.cloneNode(true));
              break;
            }
          }
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(container);
          }
          return container.innerHTML
        } else {
          if (window.Quarto?.typesetMath) {
            window.Quarto.typesetMath(note);
          }
          return note.innerHTML;
        }
      } else {
        // Remove any anchor links if they are present
        const anchorLink = note.querySelector('a.anchorjs-link');
        if (anchorLink) {
          anchorLink.remove();
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        if (note.classList.contains("callout")) {
          return note.outerHTML;
        } else {
          return note.innerHTML;
        }
      }
    }
    for (var i=0; i<xrefs.length; i++) {
      const xref = xrefs[i];
      tippyHover(xref, undefined, function(instance) {
        instance.disable();
        let url = xref.getAttribute('href');
        let hash = undefined; 
        if (url.startsWith('#')) {
          hash = url;
        } else {
          try { hash = new URL(url).hash; } catch {}
        }
        if (hash) {
          const id = hash.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note !== null) {
            try {
              const html = processXRef(id, note.cloneNode(true));
              instance.setContent(html);
            } finally {
              instance.enable();
              instance.show();
            }
          } else {
            // See if we can fetch this
            fetch(url.split('#')[0])
            .then(res => res.text())
            .then(html => {
              const parser = new DOMParser();
              const htmlDoc = parser.parseFromString(html, "text/html");
              const note = htmlDoc.getElementById(id);
              if (note !== null) {
                const html = processXRef(id, note);
                instance.setContent(html);
              } 
            }).finally(() => {
              instance.enable();
              instance.show();
            });
          }
        } else {
          // See if we can fetch a full url (with no hash to target)
          // This is a special case and we should probably do some content thinning / targeting
          fetch(url)
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.querySelector('main.content');
            if (note !== null) {
              // This should only happen for chapter cross references
              // (since there is no id in the URL)
              // remove the first header
              if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
                note.children[0].remove();
              }
              const html = processXRef(null, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      }, function(instance) {
      });
    }
        let selectedAnnoteEl;
        const selectorForAnnotation = ( cell, annotation) => {
          let cellAttr = 'data-code-cell="' + cell + '"';
          let lineAttr = 'data-code-annotation="' +  annotation + '"';
          const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
          return selector;
        }
        const selectCodeLines = (annoteEl) => {
          const doc = window.document;
          const targetCell = annoteEl.getAttribute("data-target-cell");
          const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
          const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
          const lines = annoteSpan.getAttribute("data-code-lines").split(",");
          const lineIds = lines.map((line) => {
            return targetCell + "-" + line;
          })
          let top = null;
          let height = null;
          let parent = null;
          if (lineIds.length > 0) {
              //compute the position of the single el (top and bottom and make a div)
              const el = window.document.getElementById(lineIds[0]);
              top = el.offsetTop;
              height = el.offsetHeight;
              parent = el.parentElement.parentElement;
            if (lineIds.length > 1) {
              const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
              const bottom = lastEl.offsetTop + lastEl.offsetHeight;
              height = bottom - top;
            }
            if (top !== null && height !== null && parent !== null) {
              // cook up a div (if necessary) and position it 
              let div = window.document.getElementById("code-annotation-line-highlight");
              if (div === null) {
                div = window.document.createElement("div");
                div.setAttribute("id", "code-annotation-line-highlight");
                div.style.position = 'absolute';
                parent.appendChild(div);
              }
              div.style.top = top - 2 + "px";
              div.style.height = height + 4 + "px";
              div.style.left = 0;
              let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
              if (gutterDiv === null) {
                gutterDiv = window.document.createElement("div");
                gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
                gutterDiv.style.position = 'absolute';
                const codeCell = window.document.getElementById(targetCell);
                const gutter = codeCell.querySelector('.code-annotation-gutter');
                gutter.appendChild(gutterDiv);
              }
              gutterDiv.style.top = top - 2 + "px";
              gutterDiv.style.height = height + 4 + "px";
            }
            selectedAnnoteEl = annoteEl;
          }
        };
        const unselectCodeLines = () => {
          const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
          elementsIds.forEach((elId) => {
            const div = window.document.getElementById(elId);
            if (div) {
              div.remove();
            }
          });
          selectedAnnoteEl = undefined;
        };
          // Handle positioning of the toggle
      window.addEventListener(
        "resize",
        throttle(() => {
          elRect = undefined;
          if (selectedAnnoteEl) {
            selectCodeLines(selectedAnnoteEl);
          }
        }, 10)
      );
      function throttle(fn, ms) {
      let throttle = false;
      let timer;
        return (...args) => {
          if(!throttle) { // first call gets through
              fn.apply(this, args);
              throttle = true;
          } else { // all the others get throttled
              if(timer) clearTimeout(timer); // cancel #2
              timer = setTimeout(() => {
                fn.apply(this, args);
                timer = throttle = false;
              }, ms);
          }
        };
      }
        // Attach click handler to the DT
        const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
        for (const annoteDlNode of annoteDls) {
          annoteDlNode.addEventListener('click', (event) => {
            const clickedEl = event.target;
            if (clickedEl !== selectedAnnoteEl) {
              unselectCodeLines();
              const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
              if (activeEl) {
                activeEl.classList.remove('code-annotation-active');
              }
              selectCodeLines(clickedEl);
              clickedEl.classList.add('code-annotation-active');
            } else {
              // Unselect the line
              unselectCodeLines();
              clickedEl.classList.remove('code-annotation-active');
            }
          });
        }
    const findCites = (el) => {
      const parentEl = el.parentElement;
      if (parentEl) {
        const cites = parentEl.dataset.cites;
        if (cites) {
          return {
            el,
            cites: cites.split(' ')
          };
        } else {
          return findCites(el.parentElement)
        }
      } else {
        return undefined;
      }
    };
    var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
    for (var i=0; i<bibliorefs.length; i++) {
      const ref = bibliorefs[i];
      const citeInfo = findCites(ref);
      if (citeInfo) {
        tippyHover(citeInfo.el, function() {
          var popup = window.document.createElement('div');
          citeInfo.cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    }
  });
  </script>
</div> <!-- /content -->




</body></html>